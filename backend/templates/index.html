{% extends "base.html" %}
{% block content %}
<h2>å›³é‘‘</h2>

<!-- =========================
     CSS / JS èª­ã¿è¾¼ã¿
========================= -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
<script id="initial-people-data" type="application/json">
  {{ people | tojson }}
</script>


<!-- =========================
     ä¸Šéƒ¨ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ï¼ˆã‚½ãƒ¼ãƒˆ/ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼/ç›¸æ€§è¨ºæ–­ï¼‰
========================= -->
<div class="toolbar">
  <div class="toolbar-group">
    <button id="openFilterBtn" class="btn btn-outline">ğŸ” ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</button>
    <button id="sortBtn" class="btn btn-outline">ğŸ”½ ã‚½ãƒ¼ãƒˆ</button>
  </div>

  <div class="toolbar-group">
    <button id="compatModeBtn" class="btn btn-primary">â¤ï¸ ç›¸æ€§è¨ºæ–­</button>
  </div>
</div>


<!-- =========================
     ã‚½ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«
========================= -->
<div id="sortModal"
     style="display:none; position:fixed; inset:0;
            background-color:rgba(0,0,0,0.3); justify-content:center;
            align-items:center; z-index:2000;">
  <div class="modal-box" style="max-width:300px;">
    <button type="button" id="sortCloseBtnTop" class="close-x">âœ–</button>
    <h3>ã‚½ãƒ¼ãƒˆé †ã‚’é¸æŠ</h3>

    <select id="sortSelect" class="input-full" style="margin-top:10px;">
      <option value="reading">åå‰ï¼ˆèª­ã¿ã®äº”åéŸ³é †ï¼‰</option>
      <option value="birth">èª•ç”Ÿæ—¥é †</option>
      <option value="id">ç™»éŒ²é †</option>
    </select>

    <button id="sortApplyBtn"
            class="btn btn-primary"
            style="width:100%; margin-top:15px;">
      é©ç”¨
    </button>
  </div>
</div>


<!-- =========================
     ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ«
========================= -->
<div id="filterModal" class="modal-overlay">
  <div class="modal-box">
    <button id="closeFilterBtnTop" class="close-x">âœ–</button>
    <h3>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š</h3>

    <form id="filterForm">

      <label>åå‰ï¼ˆéƒ¨åˆ†ä¸€è‡´ï¼‰:</label>
      <input type="text" name="name" class="input-full">

      <br><br>

      <label>è¡€æ¶²å‹:</label>
      <select name="blood_type" class="input-full">
        <option value="">--æŒ‡å®šãªã—--</option>
        <option>A</option><option>B</option><option>O</option><option>AB</option>
      </select>

      <br><br>

      <label>MBTI:</label>
      <select name="mbti" class="input-full">
        <option value="">--æŒ‡å®šãªã—--</option>
        {% for key, label in MBTI_LABELS.items() %}
          <option value="{{ key }}">{{ label }}</option>
        {% endfor %}
      </select>

      <br><br>

      <label>ãƒ©ãƒ–ã‚¿ã‚¤ãƒ—:</label>
      <select name="love_type" class="input-full">
        <option value="">--æŒ‡å®šãªã—--</option>
        {% for key, label in LOVE_LABELS.items() %}
          <option value="{{key}}">{{label}}</option>
        {% endfor %}
      </select>

      <br><br>

      <label>ã‚°ãƒ«ãƒ¼ãƒ—ã‚¿ã‚°:</label>
      <div class="tag-list">
        {% for tag in tags %}
          <label class="tag-item">
            <input type="checkbox" name="tags" value="{{ tag.id }}">
            {{ tag.name }}
          </label>
        {% endfor %}
      </div>

      <br>

      <!-- æ–°ãƒ‡ã‚¶ã‚¤ãƒ³ã®ãƒœã‚¿ãƒ³ -->
      <button type="button" id="applyFilterBtn" class="btn btn-primary" style="width:100%;">
        æ¤œç´¢
      </button>
    </form>
  </div>
</div>


<!-- =========================
     å›³é‘‘ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º
========================= -->
<div id="people-grid" class="grid-container">
  {% for p in people %}
  <div class="person-card" data-id="{{ p.id }}">
    {% if p.image_path %}
      <img src="{{ p.image_path }}" class="person-img">
    {% else %}
      <div class="person-placeholder">No Image</div>
    {% endif %}
    <p class="person-name"><b>{{ p.name }}</b></p>
  </div>
  {% endfor %}
</div>


<script src="{{ url_for('static', filename='js/index.js') }}?v=2"></script>

{% endblock %}
